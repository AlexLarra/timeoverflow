@APP.config ["$routeProvider", "$locationProvider", "$httpProvider",
  ($routeProvider, $locationProvider, $httpProvider) ->

    #####################################
    # Configuration of the httpProvider #


    $httpProvider.defaults.headers.common['X-CSRF-Token'] = $('meta[name=csrf-token]').attr('content')

    ######################################
    # Configuration of the routeProvider #

    $routeProvider

    .when "/"
      templateUrl: "<%= asset_path 'home.html' %>"
      controller: "RootController"

    .when "/categories/:id"
      templateUrl: "<%= asset_path 'category.html' %>"
      controller: CategoriesController

    .when "/categories"
      templateUrl: "<%= asset_path 'categories.html' %>"
      controller: CategoriesController

    .when "/users/new"
      templateUrl: "<%= asset_path('user-form.html') %>"
      controller: UsersController

    .when "/users/:id"
      templateUrl: "<%= asset_path('user.html') %>"
      controller: UsersController

    .when "/users/:id/edit"
      templateUrl: "<%= asset_path('user-form.html') %>"
      controller: UsersController

    .when "/users"
      templateUrl: "<%= asset_path('users.html') %>"
      controller: UsersController

    .when "/organizations/:id"
      templateUrl: "<%= asset_path('organization.html') %>"
      controller: OrganizationsController

    .when "/organizations"
      templateUrl: "<%= asset_path('organizations.html') %>"
      controller: OrganizationsController

    .otherwise redirectTo: "/"

    #########################################
    # Configuration of the locationProvider #


    # $locationProvider.html5Mode true

]

