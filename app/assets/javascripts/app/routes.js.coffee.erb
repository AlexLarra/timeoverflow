@APP.config ["$routeProvider", "$locationProvider", "$httpProvider",
  ($routeProvider, $locationProvider, $httpProvider) ->

    #####################################
    # Configuration of the httpProvider #


    $httpProvider.defaults.headers.common['X-CSRF-Token'] = $('meta[name=csrf-token]').attr('content')

    ######################################
    # Configuration of the routeProvider #

    $routeProvider.when "/",
      templateUrl: "<%= asset_path 'home.html' %>"
      controller: RootController

    $routeProvider.when "/categories/:id",
      templateUrl: "<%= asset_path 'category.html' %>"
      controller: CategoriesController

    $routeProvider.when "/categories",
      templateUrl: "<%= asset_path 'categories.html' %>"
      controller: CategoriesController

    $routeProvider.when "/users/new",
      templateUrl: "<%= asset_path('user-form.html') %>"
      controller: UsersController
    $routeProvider.when "/users/:id",
      templateUrl: "<%= asset_path('user.html') %>"
      controller: UsersController
    $routeProvider.when "/users/:id/edit",
      templateUrl: "<%= asset_path('user-form.html') %>"
      controller: UsersController
    $routeProvider.when "/users",
      templateUrl: "<%= asset_path('users.html') %>"
      controller: UsersController


    $routeProvider.when "/organizations/:id",
      templateUrl: "<%= asset_path('organization.html') %>"
      controller: OrganizationsController
    $routeProvider.when "/organizations",
      templateUrl: "<%= asset_path('organizations.html') %>"
      controller: OrganizationsController


    $routeProvider.otherwise redirectTo: "/"

    #########################################
    # Configuration of the locationProvider #


    $locationProvider.html5Mode true

]

